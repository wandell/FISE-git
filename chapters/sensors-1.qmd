# Sensor encoding {#sec-sensors}

The [Preface](../index.qmd#sec-preface) provides a very brief discussion of the history of image sensor technologies, from film to charge-coupled devices (CCD), and to the invention of CMOS image sensors (CIS).

Film, the first major commercial technology for capturing and storing image irradiance, relied heavily on chemistry. Light-sensitive molecules were placed in multiple layers onto flexible rolls of plastic, and the roll was loaded into the darkened body of the camera. With the body closed, the film was mechanically advanced, placing a small flat section of film in the focal plane behind the lens. To take a picture, shutter was opened and the spectral irradiance from the lens formed an image on the film. The light changed the structure of molecules in the layers with molecules that were designed to encode the image. For color film, there were multiple layers that differed in their wavelength sensitivity. These molecular changes represented the local brightness of the captured image in different wavebands. Using chemical processes, the density of changes to the light-sensitive molecules could be measured and transferred to other media, such as prints. This process required a variety of chemical consumables, and the film could not be reused. Specialized labs were needed to create the film and to develop and printing the image. Some home hobbyists could develop the film, but mainly the processes were carried out by large commercial organizations.

![Film was the dominant image sensor and recording material for a hundred years. The chemistry of film for both encoding and developing into images was the core scientific discipline. Film could not be reused, producing a steady commercial profit for large companies, such as Kodak, Fuji, Polaroid and Agfa.](images/sensors/film.png){#fig-film width="60%"}

The transition to electronics emerged with the discovery that semiconductor technology could also be used to record irradiance @boyle1970-ccd-first. Light incident on the silicon releases electrons (photoelectric effect), and the spatial pattern of these electrons can be stored and measured. This breakthrough was first implemented in 1970 by Michael Tompsett, who developed the image sensor known as the charge-coupled device (CCD). The semiconductor based sensor revolutionized imaging, moving it from a field based on chemistry to electrical engineering. Importantly, the digital readout from these electrical devices could be immediately integrated with computers. Images could be stored, shared, edited and analyzed directly from the camera output.

The first successful implementation of this principle in an image sensor was the charge-coupled device (CCD), developed in 1970 by Michael Tompsett, building on earlier work by George Smith and Willard Boyle [@boyle1970-ccd-first]. This innovation marked a fundamental shift in imaging, transitioning from a field rooted in chemistry (like photographic film) to one based on electrical engineering. A key advantage was the digital nature of the readout, allowing immediate integration with computers for storage, sharing, editing, and analysis of images directly from the camera.

While both CCD and modern CMOS (Complementary Metal-Oxide-Semiconductor) imagers utilize the photoelectric effect to detect light, they are built using distinct semiconductor technologies. These differences typically necessitate separate fabrication facilities or specialized process flows within a general CMOS facility. A pivotal development was Eric Fossum's circuit design - the active pixel sensor (APS) - which demonstrated that image sensors could be successfully implemented using mainstream CMOS microelectronics processes (@Fossum2023-invention).

![CMOS image sensors incorporate circuitry, comprising multiple subsystems and enabling many different image processing features. Maybe get a figure from one of Eric's earlier papers.](images/sensors/olympusCMOSSensorImage.png){#fig-olympus-overview style=".float-right" width="489"}

Fossum's CMOS imager breakthrough was very significant. By leveraging standard CMOS technology, it became possible to integrate not only the light-sensing pixels but also the timing, control, and signal processing circuitry onto the same sensor chip. This integration enabled new functionalities directly at the sensor level (@fig-olympus-overview). Furthermore, this shift dramatically reduced power consumption, a crucial factor that opened the door to the widespread adoption of image sensors in mobile devices. Thus, beyond the technology itself, the breakthrough enabled the massive global adoption of electronic image sensors. Their widespread use continues to impact many aspects of societies across the globe.

Considering the technological advantages and widespread adoption of CMOS image sensors, we primarily focus on their properties and operation. We will dedicate separate sections to explore the characteristics of CCD imagers and single-photon avalanche detectors (SPADs).

<!-- Fossum says: power reduced (100√ó) as well as avoid many of the charge‚Äêtransfer degradation issues associated with exposure to radiation in space [11] (see Figure 23.6).  (From the Book chapter https://onlinelibrary.wiley.com/doi/chapter-epub/10.1002/9781394202478.ch23)-->

## Transduction: The photoelectric effect

The incident light field is encoded by the light-sensitive photodiodes in the image sensor array. Each photodiode converts the energy in the irradiance at its aperture into some number of electrons. The conversion of photons to electrons is called **transduction**. The conversion of light to electrons first reported by Heinrich Hertz (@Hertz1887-photoelectric1, @Hertz1887-photoelectric2) is called the **photoelectric** effect.

The effect is linear over a large range, in the sense that doubling the light intensity will double the number of electrons generated, and the initial capture of light is usually modeled as a linear function (@Preece2022-photontransfer). The linearity holds until the material saturates (there are no more free electrons). Thus, within the linear range, the number of electrons is a direct and reliable measure of the incident light intensity.

The ratio between the number of incident photons and the number of generated electrons is called the **quantum efficiency (QE)** of the device. The QE is a wavelength-dependent function. The QE is the slope of the line relating number of incident photons (x-axis) to the number of generated electrons (y-axis),

$$
\mathrm{QE}(\lambda) = \frac{\text{number of electrons generated}}{\text{number of incident photons at wavelength } \lambda}
$$

A QE of 1 (or 100%) means that every incident photon generates an electron, while a lower QE indicates that some photons do not result in electron generation. In practice, QE varies with wavelength due to the physical properties of the sensor material and the design of the device. Manufacturers often provide QE curves that show the efficiency as a function of wavelength for a given sensor.

As we describe later, the photodiode is embedded within sensor circuitry for storing and reading out the electrons. This processing introduces some nonlinearities and noise when we measure the whole system transduction, not just the photoelectric effect portion (@Bohndiek2008-sensorlinearity). But the initial transduction from light to electrons, the photoelectric effect, is linear over a large range, and a basic understanding of CIS principles begins with this linear formulation. We discuss the limitations later, after we specify the pixel circuitry.

```{=html}
<!--
Bohndiek2008-sensorlinearity paper has figures.  Notice how nonlinear Figures 7 and 17 are.  But earlier figures (e.g., I probably have class data with response linearity and nonlinearity.  The Thieuwissen paper has an analysis of the impact of floating diffusion.
-->
```

## Transduction: statistics
The statistics of the photoelectric effect describe how the likelihood that the photons incident at a surface generate electrons. The principles of the effect are simply stated.  Suppose we have a steady source of photons, all with the same wavelength. 

1. The likelihood of a photon in any given time interval is the same
2. The probability that a photon generates an electron is constant (equal to the quantum efficiency, QE)

These principles meet the definition of the Poisson distribution. In that case the photon arrivals are considered 'events', and all the events are the same, and the chance of an event in any small interval of time is also the same.

Sim√©on Denis Poisson described the probability distribution that bears his name in his 1837 work "Recherches sur la probabilit√© des jugements en mati√®re criminelle et en mati√®re civile (Researches on the Probability of Judgments in Criminal and Civil Matters)". He developed the distribution to describe the number of discrete events occurring in a fixed interval of time or space if these events occur with a known constant mean rate and independently of the time since the last event.

While Poisson's original applications were in areas like jurisprudence and the number of soldiers killed by horse kicks in the Prussian army, the mathematical framework he established directly applies to the arrival of photons from a constant light source.

::: {#poisson-einstein .callout-note collapse="true" appearance="simple"}
## Einstein, the photoelectric effect, and the Poisson distribution
The explicit modern view ‚Äî that the number of photons arriving at a detector from a steady, coherent source follows a Poisson distribution ‚Äî was formalized in the 20th century, particularly in the development of quantum optics (e.g., by Dirac, Mandel, and Wolf in the 1930s‚Äì1960s). 

But there is an earlier historical precedent. In 1909, Albert Einstein extended his quantum theory of light by analyzing energy fluctuations in thermal equilibrium of blackbody radiation. He considered a small subvolume of a cavity at thermal equilibrium and calculated how much the energy in that subvolume fluctuated around its mean value. Starting from thermodynamic considerations, he derived the variance in energy and found that it contained two distinct contributions. 

$$
\langle (\Delta E)^2 \rangle = h \nu \langle n \rangle + \left( h \nu \langle n \rangle \right)^2
$$
where $\langle n \rangle$ is the average number of photons with frequency $\nu$ , and $h$ is Planck‚Äôs constant. 

The first term, proportional to the number of photons, $n$, reflects the statistical fluctuations expected from independent particles‚Äîlike molecules in a gas or photons in a beam. This corresponds to a Poisson distribution in photon number.

The second term, proportional to $n^2$, arises from wave interference effects, similar to intensity fluctuations in classical wave optics (e.g., speckle or diffraction patterns).

Einstein interpreted this result as evidence that light cannot be described purely as a wave or purely as a particle‚Äîit exhibits features of both, depending on the observable in question. This was an early and striking hint of wave-particle duality, decades before the full development of quantum electrodynamics. This is an interesting historical point, but by accounting for the energy variation in the volume, rather than just the absorptions, it is more complex than the modern explanation of the photoelectric effect.
:::

The Poisson distribution is particularly simple because it has only one parameter.

![Poisson distribution examples](images/sensors/03-Poisson.png){#fig-sensor-poisson width=70%}

Maybe a link to the [ISETCam script](https://htmlpreview.github.io/?https://github.com/ISET/psych221/blob/master/slides/slidesPhotonsElectrons.html). Or maybe make a separate version that is part of the FISE distribution.

::: {#photoelectric .callout-note collapse="true" appearance="simple"}
## The Photoelectric Effect and the Birth of the Photon

Physicists in the late 19th century sought to understand the spectrum of light emitted by a blackbody ‚Äî a perfect emitter and absorber of radiation. In 1900, **Max Planck** tried to match the observed blackbody spectrum with a formula. After some trial and error, he arrived at an expression that fit the data perfectly‚Äîbut only if he assumed that energy exchange between matter and radiation was quantized. He thought that, perhaps, the energy of oscillators in the cavity walls of the radiator could only take on discrete values and thus the measured absorptions and emissions needed to match these discrete levels.

$$
E = n h ŒΩ
$$ 

where ùëõ is an integer, ùúà is the frequency (inverse to wavelength) of the light, and ‚Ñé is the constant he introduced‚Äînow known as Planck‚Äôs constant.

In 1902, Philipp Lenard published a series of experiments that revealed surprising features of the **photoelectric effect**‚Äîthe emission of electrons from a metal surface exposed to light. He observed that increasing the intensity of the incident light increased the number of emitted electrons but **did not** increase their kinetic energy. Instead, the energy of the emitted electrons depended on the **wavelength** of the light: shorter wavelengths (higher frequencies) produced more energetic electrons. Lenard also identified a **threshold wavelength**‚Äîif the light‚Äôs wavelength was too long (i.e., its frequency too low), no electrons were emitted, regardless of how intense the light was. These results posed a serious challenge to classical wave theory, which predicted that energy should increase smoothly with intensity, not depend on frequency.

In 1905, Albert Einstein offered a revolutionary explanation. He proposed that light is not just a continuous wave but is **quantized** into discrete packets of energy‚Äîlater called **photons**. The energy of each photon is proportional to its frequency, given by:

$$
E = h \nu
$$

where $h$ is Planck‚Äôs constant and $\nu$ is the frequency of the light. This bold hypothesis went beyond Max Planck‚Äôs earlier work, which had only assumed quantized energy exchange between matter and radiation‚Äînot that light itself came in packets. Einstein suggested that **light in free space** behaves as localized energy quanta, capable of transferring energy to electrons one photon at a time. His theory explained all of Lenard‚Äôs observations and laid the groundwork for quantum physics.

![Lenard made measurements that defined important properties of the photoelectric effect. Einstein offered a bold theoretical idea, what we now call the photon, that explained Lenard's and Planck's measurements. Einstein, who was Jewish, had a complex personal relationship with Planck, as they navigated Hitler's rise to power. Lenard became strongly anti-Semitic.](images/people/03-Lenard-Einstein.png){#lenard-einstein width="50%" fig-align="center"}

Einstein‚Äôs proposal was met with skepticism. The wave theory of light, supported by extensive experimental evidence like interference and diffraction, remained central to physics. Even Einstein himself was uneasy with the resulting **wave-particle duality**. He believed that this duality hinted at an incomplete understanding of nature, and he famously rejected the probabilistic foundations of quantum mechanics, remarking that ‚ÄúGod does not play dice.‚Äù Niels Bohr, a champion of the new quantum theory and Einstein‚Äôs intellectual foil, is said to have replied, ‚ÄúEinstein, don‚Äôt tell God what to do.‚Äù The tension between wave and particle descriptions remains a central‚Äîand still puzzling‚Äîtheme in physics.

That same year‚ÄîEinstein‚Äôs *annus mirabilis*‚Äîhe published four groundbreaking papers that reshaped modern physics. Alongside the photoelectric effect, his work on Special Relativity showed that **simultaneity is relative**, depending on the observer‚Äôs frame of reference. Walter Isaacson‚Äôs biography of Einstein provides an accessible account of these discoveries and the broader scientific context. Isaacson also details how Lenard, despite receiving the Nobel Prize for research that Einstein had admired and extended, became an outspoken anti-Semite who actively opposed Einstein‚Äôs recognition by the Nobel committee.

```{=html}
<!--
Photoelectric effect and Lenard
https://www.perplexity.ai/search/when-einstein-worked-out-the-p-_doyK0P0SPCj2lF728iVpg 
-->
```
:::