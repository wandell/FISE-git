# Circuits {#sec-sensors-circuits}

Basic digital image sensors share several key hardware components and design features. Before capturing an image, the circuitry resets each pixel, clearing any residual charge from previous exposures. During image acquisition, each photodiode collects electrons generated by incoming light; these electrons are stored either within the photodiode or in a nearby capacitor. When the image is read out, specialized circuitry transfers the stored charge to an analog-to-digital converter (ADC), which converts it into a digital value proportional to the number of collected electrons. The resulting digital image array reflects the amount of light captured by each pixel.

This overview covers the essential operation, but image sensors also include additional hardware such as color filter arrays, microlenses to focus light onto each pixel, and specific circuit layouts to manage charge flow and storage. The following sections introduce these components and show how to simulate sensor performance from scene capture to digital output.

Standard sensor designs are effective for many uses, which is why they are produced in large quantities. However, they have limitations: color filters can reduce sensitivity and restrict spectral information, while circuit elements can introduce noise or limit dynamic range and speed. These challenges have driven innovations in sensor and pixel design, especially for applications beyond traditional photography. Later sections will explore advanced pixel architectures, new materials, and on-chip processing techniques that address these issues. As this book is online, sections about these advances can be updated as new technologies emerge as well as links to additional resources.

## 3T circuitry
The initial 3T is a good Foundation for Understanding:
The 3T (three-transistor) architecture forms the conceptual basis for understanding more complex pixel designs, including 4T and beyond. Explaining it helps readers grasp:
It was the original circuitry introduced by Fossum in the 1990s. Understanding this circuit will introduce: The basic operation of pixel readout, The role of the reset, source follower, and row select transistors, Sources of noise like kTC noise and fixed pattern noise (FPN).

The photoelectric effect measured in a properly setup lab is linear; but in real image sensors the photoelectric effect is embedded in a circuit and nonlinearities will arise. The circuitry that manages the acquisition, storage, and readout of the data has limitations that introduce nonlinearities of a few percent @Wang2017-CMOSLinearity. Hardware limitations, too, can introduce obvious nonlinearities. For example, the component that stores the electrons has finite capacity.  Also, the transistors that move the charge to the ADC can introduce nonlinearities and noise.


![http://en.wikipedia.org/wiki/Active_pixel_sensor , http://encyclobeamia.solarbotics.net/articles/vxx.html , 
Vdd is positive supply voltage  (http://encyclopedia2.thefreedictionary.com/Vdd also the drain voltage), Vrst is the reset voltage Vee is the negative supply voltage Ground is ground
](images/sensors/03-3T-circuit.png)

Another source of nonlinearity arises from the photodiode itself. At high irradiance levels, the photodiode can saturate, meaning that it cannot generate additional electrons regardless of the incoming light. This saturation effect imposes a hard limit on the dynamic range of the sensor.

Temperature variations can also affect the linearity of the sensor. Changes in temperature can alter the behavior of the photodiode and the associated circuitry, leading to temperature-dependent nonlinearities. Modern sensors often include compensation mechanisms to mitigate these effects, but residual nonlinearities may still remain.

Understanding and modeling these nonlinearities is critical for applications that require high precision, such as scientific imaging or computational photography. Calibration techniques, such as measuring the sensor response under controlled conditions, can help correct for these nonlinearities in post-processing.

Over time, as technology has scaled, more complex electrical circuitry has been placed on the sensor. Modern image sensors frequently include circuitry that performs local processing to increase the dynamic range of the sensor (well recycling), or to reduce the intrinsic noise (correlated double sampling). Some of this processing is *adaptive*, that is the circuit actions depend on the property of the input image. Consequently, the sensor output can depend upon both the control parameters set by the user and the image content.

## 4T circuitry
The 4T CMOS Pixel and pinned photodiode
The combination of the pinned photodiode with a transfer gate was integrated into CMOS image sensors in the late 1990s.  Review from @Fossum2014-pinnedpd

The 4T pixel (with pinned photodiode and transfer gate) is now the standard in nearly all high-performance CMOS sensors, including: Mobile phone cameras, Machine vision, Automotive, Scientific imaging.

Benefits over 3T: Correlated double sampling (CDS) to remove reset noise, Global shutter (with additional circuitry), Lower dark current and improved quantum efficiency, Better low-light performance and dynamic range

![http://en.wikipedia.org/wiki/Active_pixel_sensor , http://encyclobeamia.solarbotics.net/articles/vxx.html , 
Vdd is positive supply voltage  (http://encyclopedia2.thefreedictionary.com/Vdd also the drain voltage), Vrst is the reset voltage Vee is the negative supply voltage Ground is ground
](images/sensors/03-4T-circuit.png)

## Well capacity

These capacitors have a finite capacity, which is called the **well capacity** or **full-well capacity**. The well capacity is simply the maximum number of electrons that can be stored in the capacitor before it saturates. When the number of photo-generated electrons exceeds the well capacity, the photodiode is saturated and its output no longer increases with increasing light intensity. This limits the dynamic range of the sensor and is an important consideration in sensor design and performance evaluation.

## Circuit noise